# 精美卡片生成器

一个支持预览与下载效果完全一致的高质量卡片生成器，支持多种主题风格和AI智能生成金句功能。

## 🌟 核心特性

### 🎯 预览与下载完全一致
- **实时预览**：所见即所得，预览效果与下载图片100%一致
- **Canvas渲染**：使用高质量Canvas技术，确保视觉效果统一
- **9种精美主题**：6种渐变主题 + 3种纯色简约主题，满足不同需求
- **高分辨率输出**：支持2倍及以上分辨率，确保图片清晰度

### 📝 智能内容生成
- **手动输入**：支持用户自定义金句和来源
- **AI智能生成**：接入硅基流动API，自动生成高质量金句
- **快速随机**：本地精选金句库，毫秒级响应
- **多样化来源**：涵盖影视剧台词、名人名言、名著语录等

### 🎨 专业视觉效果
- **渐变背景**：完美还原CSS渐变效果
- **文字阴影**：专业级文字阴影和光影效果
- **圆角设计**：现代化的圆角矩形设计
- **智能排版**：自动文字换行和中文排版优化

### 💾 高质量下载
- **PNG格式**：无损压缩，保证最佳质量
- **高DPI支持**：自动适配高分辨率屏幕
- **抗锯齿处理**：平滑的字体和图形渲染
- **文件名优化**：包含日期和主题的智能命名

## 🔧 最新更新

### v2.0.2 - 纯色简约主题扩展 🎨
- **🎨 新增主题**：添加三种纯色简约风格主题
  - 纯白简约：干净的白色背景，黑色文字，适合商务文档
  - 纯黑简约：深邃的黑色背景，白色文字，现代时尚风格
  - 雅灰简约：温和的灰色背景，白色文字，沉稳内敛
- **🔄 智能文字颜色**：根据背景自动调整文字颜色和阴影效果
- **🖼️ 完整支持**：预览、生成、下载三个环节全面支持新主题
- **📱 优化体验**：主题选择器中针对浅色主题优化显示效果

### v2.0.1 - TypeScript构建错误修复 🛠️
- **🔧 构建优化**：完全解决了Vercel部署时的TypeScript编译错误
- **🧹 代码清理**：移除未使用的变量和函数，提升代码质量
- **⚡ 类型安全**：修复接口类型不匹配问题，确保类型系统完整性
- **📦 部署就绪**：项目现在可以顺利在Vercel等平台上部署

### v2.0.0 - 预览与下载效果一致性重大升级 ⭐
- **🎯 核心问题解决**：完全解决了预览和下载图片效果不一致的问题
- **🎨 视觉主题系统**：新增6种精美主题，支持实时切换预览
- **🖼️ Canvas渲染引擎**：重写图片生成引擎，完美匹配CSS视觉效果
- **📐 高质量输出**：2倍分辨率渲染，支持高清图片下载
- **💫 专业视觉效果**：文字阴影、渐变背景、圆角设计完美还原
- **🔄 实时预览**：选择主题后立即更新预览，所见即所得
- **📱 响应式设计**：优化移动端和桌面端体验

### v1.0.13 - 编辑框内容清理优化
- **🚫 破折号清理**：确保所有编辑框中都不会出现"—"破折号字符
- **🧹 内容净化**：增强的文本清理算法，自动移除分隔符
- **✨ 用户体验**：金句和作者编辑框内容更加纯净，只显示核心内容

## 🛠️ 技术实现

### 前端架构
- **React 18**：使用最新的并发特性和自动批处理
- **TypeScript**：完整的类型安全保障
- **Tailwind CSS**：现代化的样式系统
- **Canvas API**：高质量图片渲染引擎

### 核心算法
- **主题映射系统**：CSS主题与Canvas渲染的完美映射
- **文字排版引擎**：智能换行和中文排版优化
- **高DPI渲染**：自动检测设备像素比，确保高清输出
- **颜色空间管理**：精确的颜色还原和渐变处理

## 🎨 主题风格

| 主题名称 | 颜色方案 | 适用场景 |
|---------|---------|---------|
| 经典紫 | 紫色渐变(#667eea → #764ba2) | 商务、正式场合 |
| 日落粉 | 粉色渐变(#ff9a9e → #fecfef) | 温馨、浪漫主题 |
| 海洋蓝 | 蓝色渐变(#667eea → #764ba2) | 清新、宁静氛围 |
| 森林绿 | 绿色渐变(#11998e → #38ef7d) | 自然、生机主题 |
| 银河灰 | 深色渐变(#2c3e50 → #4a00e0) | 科技、神秘风格 |
| 极光蓝 | 蓝色渐变(#00c6ff → #0072ff) | 清新、现代感 |
| 纯白简约 | 纯白背景(#ffffff) | 商务文档、简约风格 |
| 纯黑简约 | 纯黑背景(#1a1a1a) | 现代时尚、夜间模式 |
| 雅灰简约 | 雅灰背景(#6b7280) | 沉稳内敛、中性色调 |

## 🚀 快速开始

### 环境要求
- Node.js >= 16.0.0
- npm >= 7.0.0

### 安装依赖
```bash
npm install
```

### 开发模式
```bash
npm run dev
```

### 生产构建
```bash
npm run build
```

## 📖 使用说明

### 基础功能
1. **输入内容**：在左侧输入框中填写您的金句和来源
2. **选择主题**：从6种精美主题中选择喜欢的风格
3. **实时预览**：右侧会实时显示卡片效果
4. **生成下载**：点击"生成高质量卡片"创建图片
5. **下载保存**：生成完成后点击"下载卡片"保存到本地

### AI生成功能
1. **快速随机**：点击"快速随机金句"从本地精选库中获取
2. **AI智能生成**：配置API后使用"AI随机生成金句"功能
3. **主题分类**：AI支持励志、哲理、情感、生活、智慧等主题

### 高级功能
- **主题实时切换**：选择主题后预览立即更新
- **高质量输出**：自动生成2倍分辨率的高清图片
- **智能文件名**：下载文件自动包含日期和主题信息
- **错误处理**：完善的错误提示和恢复机制

## 🔧 API配置

### 硅基流动API配置
1. 注册账号：https://cloud.siliconflow.cn/
2. 获取API Key
3. 配置环境变量：
```bash
VITE_SILICONFLOW_API_KEY=your_api_key_here
VITE_SILICONFLOW_BASE_URL=https://api.siliconflow.cn/v1
```

## 🎯 技术特色

### 预览与下载一致性解决方案
过去的问题：
- 预览使用CSS渲染，下载使用简单Canvas绘制
- 视觉效果差异巨大，用户体验不佳
- 颜色、字体、布局完全不匹配

现在的解决方案：
- **统一渲染引擎**：预览和下载都基于相同的视觉规范
- **CSS→Canvas映射**：完美还原CSS渐变、阴影、圆角效果
- **高质量输出**：Canvas渲染支持高DPI和抗锯齿
- **实时同步**：主题切换时预览和生成引擎同步更新

### 核心技术优势
1. **颜色精确还原**：CSS颜色值与Canvas渲染100%匹配
2. **字体渲染优化**：支持文字阴影和抗锯齿
3. **布局计算精确**：位置、间距、大小完全一致
4. **性能优化**：高效的渲染算法，快速生成高质量图片

## 📦 项目结构

```
card/
├── public/                 # 静态资源
├── src/
│   ├── components/         # React组件
│   │   ├── CardPreview/    # 卡片预览组件（新）
│   │   ├── InputForm/      # 输入表单组件（重构）
│   │   └── ui/            # 基础UI组件
│   ├── hooks/              # 自定义Hooks
│   │   └── useCardGenerator.ts # 卡片生成状态管理（新）
│   ├── services/           # API服务
│   ├── types/              # TypeScript类型定义（扩展）
│   ├── utils/              # 工具函数
│   │   └── cardGenerator.ts # Canvas渲染引擎（重写）
│   └── styles/             # 样式文件
├── package.json
└── README.md
```

## 🤖 AI生成功能详解

### 智能内容生成
- **多主题支持**：励志、哲理、情感、生活、智慧
- **丰富来源库**：影视剧、名著、歌曲、名人名言等
- **具体出处标注**：每句金句都有明确的来源信息
- **双重随机策略**：80%本地快速 + 20%AI智能生成

### 性能优化策略
- **超时控制**：10秒API超时，避免长时间等待
- **智能降级**：API失败时自动使用本地精选金句
- **加载状态**：清晰的进度提示和状态反馈
- **错误处理**：友好的错误提示和重试机制

## 🎨 设计规范

### 视觉层次
- **主标题**：90px大号字体，白色+阴影
- **副标题**：26px中号字体，90%透明度
- **金句内容**：32px重点字体，居中排版
- **来源署名**：20px小号字体，85%透明度

### 色彩系统
- **主色调**：根据选择的主题动态变化
- **文字颜色**：白色系列，不同透明度层次
- **阴影效果**：黑色半透明，营造立体感
- **边框圆角**：20px统一圆角，现代化设计

## 🔮 未来规划

### 短期目标（v2.1）
- [ ] 更多主题风格（渐变、纯色、图片背景）
- [ ] 字体选择功能
- [ ] 卡片尺寸自定义
- [ ] 批量生成功能

### 中期目标（v2.5）
- [ ] 动态效果预览
- [ ] 视频格式导出
- [ ] 社交媒体分享集成
- [ ] 用户作品画廊

### 长期目标（v3.0）
- [ ] 在线编辑器
- [ ] 模板市场
- [ ] 协作功能
- [ ] 移动端APP

## 🤝 贡献指南

我们欢迎任何形式的贡献！请查看以下指南：

1. **报告问题**：使用GitHub Issues报告bug或建议
2. **提交代码**：Fork项目，创建分支，提交PR
3. **完善文档**：帮助改进文档和示例
4. **分享经验**：在社区分享使用心得

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 🙏 致谢

感谢所有为这个项目做出贡献的开发者和用户！

特别感谢：
- React 团队提供的优秀框架
- Tailwind CSS 的现代化样式系统
- 硅基流动提供的AI服务支持
- 所有提供反馈和建议的用户

---

**预览即所得，下载效果与预览完全一致！** 🎯 